<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
<meta charset="UTF-8">
<!--<Copyright Panteleimon Rodis>-->
	<Style>

#form1,#form21,#maps{
	position: absolute;
        bottom: 0%;
	width:100%;
	font-style: italic;
	color:blue;
}
select {
    width: 0px;
    display: none;
}
select::-ms-expand {
	width: 0px;
    display: none;
}
#selp{
	posotion:absolute;
	left:0%;
	top:0%;
}
#logo{
        position: absolute;
	cursor: pointer;
	bottom:0%;
	right:0%;
	z-index: 1000;
	font-style: italic;
	color:grey;
	height: 38px;
	width: 38px;
        border-color: #888888;
        box-shadow: 4px 4px 4px #888888 inset;
}
#credits{
    margin: 0; 
    padding: 0;
    position:absolute;
    bottom:2px;
    left:1px;
    color:blue;
    z-index: 1000;
}
#map{
	background-color: #000;
}
body {background-color:white;
	color:lightblue;
}
.olImageLoadError {
    display: none !important;
}
	</Style>
  <title>Globe</title> 
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
</head>
<body style="margin: 0; padding: 0">

	<input id="logo" type="button" style="background:url(ims/logo-smaller.png)" onclick="fullver()"/>
	<div id="frame" style="width:100%;">	
	
	<div style="width:100%; height:100%;margin: 0; padding: 0" id="map">
		<script>var custom=true;var wmsprj;var zoomcnt=false;var zoomcnt2=false;var mob=false;</script>

	</div>
	<select id="selp" style="background-color:lightblue;border-radius: 4px;" onchange="sf()">
			<option selected value="wms">WMS</option>
			<option value="arest">ArcGIS Rest</option>
	</select>
	<form id="form1" action="#" onsubmit="return false;" style="margin: 0; padding: 0;">
		<input type="text" style="width:0px; height:0px;" id= "wurl" name="wurl">
		<input type="text" name="layer" id="layer" style="width:0px; height:0px;">

	</form>
        <div id="credits"></div>
	<script>
	
		function getUrlVars() {
			var u=window.location.href;
				u=u.replace(/%3A/g, ":");
				u=u.replace(/%2F/g, "/");
				u=u.replace(/%3F/g, "?");
			var vars = {};
			var parts = u.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
				vars[key] = value;
			});
			return vars;
		}
		var ur;
                if(getUrlVars()["u"] != 'undefined' && getUrlVars()["u"]!=null){
                    ur=getUrlVars()["u"];}
                else{
                    ur=getUrlVars()["wmsurl"];
                }
		var la;
                if(getUrlVars()["l"] != 'undefined' && getUrlVars()["l"]!=null){
                    la=getUrlVars()["l"];}
                else{
                    la=getUrlVars()["wmslayer"];
                }
                    la= decodeURIComponent(la);
                var wmsprj;
                if(getUrlVars()["j"] != 'undefined' && getUrlVars()["j"]!=null){
                    wmsprj=getUrlVars()["j"];}
                else{
                    wmsprj=getUrlVars()["wmsprj"];
                }
                if(getUrlVars()["p"] != 'undefined' && getUrlVars()["p"]!=null){
                    prot=getUrlVars()["p"];
                    selp.value=getUrlVars()["p"];}
                else{
                    prot=getUrlVars()["wms"];
                }
                var t;
                if(getUrlVars()["s"] != 'undefined' && getUrlVars()["s"]!=null){
                    t=getUrlVars()["s"];}
                else{
                    t=getUrlVars()["wmsside"];
                }
                var b;
                if(getUrlVars()["b"] != 'undefined' && getUrlVars()["b"]!=null){
                    b=getUrlVars()["b"];}
                else{
                    b=getUrlVars()["wmsborder"];
                }
                var wmscenterx;
                if(getUrlVars()["x"] != 'undefined' && getUrlVars()["x"]!=null){
                    wmscenterx=getUrlVars()["x"];}
                else{
                    wmscenterx=getUrlVars()["wmscenterx"];
                }
                var wmscentery;
                if(getUrlVars()["y"] != 'undefined' && getUrlVars()["y"]!=null){
                    wmscentery=getUrlVars()["y"];}
                else{
                    wmscentery=getUrlVars()["wmscentery"];
                }
                var wmszoom;
                if(getUrlVars()["z"] != 'undefined' && getUrlVars()["z"]!=null){
                    wmszoom=getUrlVars()["z"];}
                else{
                    wmszoom=getUrlVars()["wmszoom"];
                }
		document.getElementById("wurl").value=ur;
		document.getElementById("layer").value=la;
		                
		function fullver(){
                if(screen.width>800){
		var refurl='https://wms-viewer-online.appspot.com/custom3.html?&wmsurl=https://ows.terrestris.de/osm/service?&wmslayer=OSM-WMS&wmsborder=none&wmsside=Build&wmscenterx=23.63&wmscentery=38.2021&wmszoom=5&wmsprj=EPSG:4326';
		}else{
		var refurl='https://wms-viewer-online.appspot.com/custommb.html?&wmsurl=https://ows.terrestris.de/osm/service?&wmslayer=OSM-WMS&wmsborder=none&wmsside=Build&wmscenterx=23.63&wmscentery=38.2021&wmszoom=5&wmsprj=EPSG:4326';
		}
		window.open(refurl,'_blank');
		}           
	</script>

	</div>

<script src="webglearth/api.js" type="text/javascript" crossorigin="anonymous"></script>
                
<script crossorigin="anonymous">
	    ur=(function() {
    var cors_api_host = 'cors-anywhere.herokuapp.com';
    var cors_api_url = 'https://' + cors_api_host + '/';
    var slice = [].slice;
    var origin = window.location.protocol + '//' + window.location.host;
    var open = XMLHttpRequest.prototype.open;
    XMLHttpRequest.prototype.open = function() {
        var args = slice.call(arguments);
        var targetOrigin = /^https?:\/\/([^\/]+)/i.exec(args[1]);
        if (targetOrigin && targetOrigin[0].toLowerCase() !== origin &&
            targetOrigin[1] !== cors_api_host) {
            args[1] = cors_api_url + args[1];
        }
        return open.apply(this, args);
    };
})();
var options={atmosphere:true,sky:true, crossOrigin : "anonymous"};
var m = new WE.map('map',options);
var wms = m.initMap(WebGLEarth.Maps.WMS, [la, ur, '', la, '', '', '', '', 1, 15]);
m.setPosition(wmscentery,wmscenterx,wmszoom);                                              
m.setBaseMap(wms);    
</script>
                

</body>
</html>
